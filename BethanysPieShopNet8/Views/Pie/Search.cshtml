@{
    ViewData["Title"] = "Search Results";
}

<br />
<br />

<div class="" my-5="">
    <h3 class="" mb-4="">
        Enter your search query
    </h3>
    <input id="txtPieName" type="text" />
    <button id="searchButton" class="btn btn-secondary">Search</button>
</div>
<br />
<table id="tblPies" cellpadding="2" cellspacing="2">
    <tbody></tbody>
</table>

<script type="text/javascript">

    $(document).ready(function(){
      $("button").click(function(){
        var searchQuery = $.trim($("#txtPieName").val());
            $("table tbody").html("");
            $.ajax({
                type: "POST",
                url: "/api/Search",
                data: "\"" + searchQuery + "\"",
                contentType: "application/json; charset=utf-8",
                datatype: "json",
                success:function(pies){
                    var table = $("#tblPies");
                    table.find("tr:not(:first)").remove();
                    $.each(pies, function(i, pie){
                        $("tbody").append($("<tr>"));
                        appendElement = $("tbody tr").last();
                        appendElement.append($("<td>").html('<img src=' + pie.imageThumbnailUrl + '>'));
                        appendElement.append($("<td>").html('<h2><a href="/pie/details/' + pie.pieId + '"><br>' + pie.name + '</a></h2>'));
                        //appendElement.append($("<td>").html(pie.price));
                    });
                },
                error: function(xhr, status, error){
                         console.log(xhr)
                }
            });
      });
    });

</script>
